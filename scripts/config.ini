# Parameters for interactive peak fitting and area calculation. The input dir contains the input xlsx generated by the preprocessing script run_process.py and the reference peak txt file containing metabolite names and the peak location in ppm.
[paths]
working_dir = /data/local/jy1008/MA-host-microbiome/dfba_JY/nmr_area_estimation/data/Data7_13CGlc1_1H_Test
output_dir = /data/local/jy1008/MA-host-microbiome/dfba_JY/nmr_area_estimation/output/Data7_13CGlc1_1H_Test/peak_fit_files
input_stack = Data7_13CGlc1_1H.xlsx
input_ref_peaks = cfg_1H.txt

[params]
# Controls the width of the interactive view in ppm around a specified reference peak location
base_fit_window=0.04
# Controls the sensitivity of automatic detection of number of peaks. This is typically not modified. The number of peaks can also be overwritten by the user during runtime.
prominence_factor=0.1

# Parameters for logistic curve fitting to trajectories. The input directory contains one json file per fid storing the peak fit parameters and calculated area. The output directory contains fitted logistic curve parameters. 
[trajectories]
input_dir = /data/local/jy1008/MA-host-microbiome/dfba_JY/nmr_area_estimation/output/Data7_13CGlc1_1H_Test/peak_fit_files
output_dir = /data/local/jy1008/MA-host-microbiome/dfba_JY/nmr_area_estimation/output/Data7_13CGlc1_1H_Test/trajectories
exp_name = Data7_13CGlc1_1H

# Proton numbers of peaks pertaining to each metabolite. The raw NMR areas (a.u.) are divided by each of these constants.
[proton_num]
13C_Glucose = 0.5
13C_Acetate = 2.0
13C_Butyrate = 3.0
13C_Ethanol  = 4.0
13C_Alanine  = 1.0
5-aminovalerate = 3.0
Arginine = 3.0
Isocaproate = 3.0
Leucine = 4.0
Methionine = 1.0
Proline = 3.0
Threonine = 2.0
Tryptophan = 2.0

# Each of the following describes a strategy for converting NMR areas (after adjustment by proton number) to concentrations in mMols. A metabolite should appear under one of the three categories below. The value associated with each metabolite name is either the initial concentration, or other scaling factor, such as the slope of the standard curve ratios.

# Metabolites listed here have their areas scaled such that the first fid in time equals the specified initial concentration. (Select this one in instances where, the logistic asymptote does a poor job representing the start of the reaction, or the reaction has already partially progressed, e.g. in Glucose.)
[scale_mMol_to_initial]
13C_Glucose = 27.5

# Metabolites listed here have their areas scaled such that the upper asymptote of the fitted logistic curve matches the specified concentration value, either an initial or final concentration.
[scale_mMol_to_asymptote]
Arginine = 1.15
Histidine = 0.65
Methionine = 1.34
Threonine = 1.68
Tryptophan = 0.49
Proline = 6.96
5-aminovalerate = 6.96
Leucine = 7.63
# Leucine products are calculated from a ratio of reference values (see Pavao et al., 2023)
# 5.168 / (2.944 + 5.168 + 1.387) * leucine_consumed
Isocaproate = 4.15

# Glucose products listed here are estimated in relation to the glucose area and scaled concentration using standard experiments. From a set of experiments with ground truth concentrations, the ratio of concentrations divided by NMR areas is calculated both for each metabolite and glucose within each spectrum. Each metabolite is plotted against glucose, and a linear trendline is fitted, with the slopes listed below. These slopes are used to infer the product metabolite concentrations from the glucose peak area and scaled concentration at any given fid.

# [y]/(area(y)) = m [glc]/(area(glc))
[scale_mMol_to_ratio]
13C_Acetate = 1.47302042086492
13C_Alanine = 0.2492142688906
13C_Butyrate = 1.04696313408039
13C_Ethanol = 1.49704986074295

